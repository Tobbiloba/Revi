class e{constructor(e){var t,n,r;this.webVitals={},this.performanceEntries=[],this.config=e,(null===(t=this.config.performance)||void 0===t?void 0:t.captureWebVitals)&&this.setupWebVitals(),(null===(n=this.config.performance)||void 0===n?void 0:n.captureResourceTiming)&&this.setupResourceTiming(),(null===(r=this.config.performance)||void 0===r?void 0:r.captureNavigationTiming)&&this.setupNavigationTiming()}setupWebVitals(){if("undefined"!=typeof window&&"PerformanceObserver"in window){try{new PerformanceObserver(e=>{const t=e.getEntries();this.webVitals.lcp=t[t.length-1].startTime}).observe({entryTypes:["largest-contentful-paint"]})}catch(e){}try{new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.webVitals.fid=e.processingStart-e.startTime})}).observe({entryTypes:["first-input"]})}catch(e){}try{let e=0;new PerformanceObserver(t=>{t.getEntries().forEach(t=>{t.hadRecentInput||(e+=t.value,this.webVitals.cls=e)})}).observe({entryTypes:["layout-shift"]})}catch(e){}try{new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"first-contentful-paint"===e.name&&(this.webVitals.fcp=e.startTime)})}).observe({entryTypes:["paint"]})}catch(e){}this.calculateTTFB()}}calculateTTFB(){if("undefined"!=typeof window&&window.performance)try{const e=performance.getEntriesByType("navigation")[0];e&&(this.webVitals.ttfb=e.responseStart-e.requestStart)}catch(e){}}setupResourceTiming(){if("undefined"!=typeof window&&window.performance)try{new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.performanceEntries.push({name:e.name,entryType:e.entryType,startTime:e.startTime,duration:e.duration,transferSize:e.transferSize,encodedBodySize:e.encodedBodySize,decodedBodySize:e.decodedBodySize})})}).observe({entryTypes:["resource"]})}catch(e){}}setupNavigationTiming(){"undefined"!=typeof window&&window.performance&&window.addEventListener("load",()=>{try{const e=performance.getEntriesByType("navigation")[0];e&&this.performanceEntries.push({name:"navigation",entryType:"navigation",startTime:e.startTime,duration:e.duration,domContentLoadedEventEnd:e.domContentLoadedEventEnd,domContentLoadedEventStart:e.domContentLoadedEventStart,loadEventEnd:e.loadEventEnd,loadEventStart:e.loadEventStart,domComplete:e.domComplete,domInteractive:e.domInteractive})}catch(e){}})}getWebVitals(){return{...this.webVitals}}getPerformanceEntries(){return[...this.performanceEntries]}clearPerformanceEntries(){this.performanceEntries=[]}mark(e){if("undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.mark)try{performance.mark(e)}catch(e){}}measure(e,t,n){if("undefined"==typeof window||!window.performance||!window.performance.measure)return null;try{performance.measure(e,t,n);const r=performance.getEntriesByName(e,"measure")[0];return r?r.duration:null}catch(e){return null}}}export{e as PerformanceMonitor};
//# sourceMappingURL=performance-monitor.esm.js.map
